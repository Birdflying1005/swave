<!doctype html>
<html class="fixed sidebar-light">
<head>
    <meta charset="UTF-8">

    <title>Quick Start Â· swave</title>
    <meta name="keywords" content="scala, streams, streaming, reactive, asynchronous, non-blocking" />
    <meta name="description" content='A Reactive Streams infrastructure implementation in Scala'>
    <meta name="author" content="The swave team">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Shadows+Into+Light" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../assets/css/theme.css" />
    <link rel="stylesheet" href="../assets/css/skins/default.css" />
    <link rel="stylesheet" href="../assets/css/theme-custom.css">
    <link rel="stylesheet" href="../assets/vendor/highlight/github.css">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="swave.io">
    <meta name="application-name" content="swave.io">
    <meta name="theme-color" content="#ffffff">

    <script src="../assets/vendor/modernizr/modernizr.js"></script>
</head>
<body >
<section class="body">

    <header class="header">
        <div class="logo-container">
            <a href="../index.html" class="logo">
                <img src="../assets/img/swave-logo.svg" height="35" alt="swave" />
            </a>
            <div class="visible-xs toggle-sidebar-left" data-toggle-class="sidebar-left-opened" data-target="html" data-fire-event="sidebar-left-opened">
                <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
            </div>
        </div>

        <div class="header-right hidden-xs">
            <ul class="social-icons">
                <li class="social-icons-github"><a href="https://github.com/sirthias/swave/" target="_blank" title="Github"><i class="fa fa-github"></i></a></li>
                <li class="social-icons-email"><a href="https://groups.google.com/forum/#!forum/swave-user" target="_blank" title="Mailing List"><i class="fa fa-envelope"></i></a></li>
                <li class="social-icons-twitter"><a href="https://twitter.com/swaveio/" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></li>
            </ul>
            <div id="talks-link">
                <a href="../introduction/talks-on-swave.html" title="Watch the latest introductory talks for swave!">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>&nbsp;
                    <i class="fa fa-video-camera" aria-hidden="true"></i>&nbsp;Watch an intro talk on swave!&nbsp;
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </header>

    <div class="inner-wrapper">
        <aside id="sidebar-left" class="sidebar-left">

            <div class="sidebar-header">
                <div class="sidebar-title">
                    Content
                </div>
                <div class="sidebar-toggle hidden-xs" data-toggle-class="sidebar-left-collapsed" data-target="html" data-fire-event="sidebar-left-toggle">
                    <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
                </div>
            </div>

            <div class="nano">
                <div class="nano-content">
                    <nav id="menu" class="nav-main" role="navigation">
                        <ul class="nav nav-main">
                          <li class="nav-parent"><a><i class="fa fa-blind" aria-hidden="true"></i><span>Introduction</span></a>
                          <ul class="nav nav-children">
                            <li><a href="../introduction/overview.html">Overview</a></li>
                            <li><a href="../introduction/reactive-streams.html">Reactive Streams</a></li>
                            <li><a href="../introduction/swave-vs-akka-stream.html"><em>swave</em> vs. Akka-Stream</a></li>
                            <li><a href="../introduction/talks-on-swave.html">Talks on <em>swave</em></a></li>
                          </ul></li>
                          <li class="nav-parent nav-expanded nav-active"><a><i class="fa fa-book" aria-hidden="true"></i><span>User Documentation</span></a>
                          <ul class="nav nav-children">
                            <li class="nav-parent"><a>Show-Off</a>
                            <ul class="nav nav-children">
                              <li><a href="../usage/show-off/overview.html">Show-Off Overview</a></li>
                              <li><a href="../usage/show-off/md5.html">MD5 Example</a></li>
                              <li><a href="../usage/show-off/fibonacci.html">Fibonacci Example</a></li>
                            </ul></li>
                            <li><a href="../usage/setup.html">Setup</a></li>
                            <li class="nav-expanded nav-active"><a href="../usage/quick-start.html">Quick Start</a></li>
                            <li><a href="../usage/basics.html">Basics</a></li>
                            <li><a href="../usage/spouts.html">Spouts</a></li>
                            <li><a href="../usage/drains.html">Drains</a></li>
                            <li class="nav-parent"><a>Transformations</a>
                            <ul class="nav nav-children">
                              <li><a href="../usage/transformations/overview.html">Transformations Overview</a></li>
                              <li><a href="../usage/transformations/simple.html">Simple Transformations</a></li>
                              <li><a href="../usage/transformations/fan-ins.html">Fan-Ins</a></li>
                              <li><a href="../usage/transformations/fan-outs.html">Fan-Outs</a></li>
                              <li><a href="../usage/transformations/streams-of-streams.html">Streams-of-Streams</a></li>
                              <li><a href="../usage/transformations/relationships.html">Fan-In/Out Relationships</a></li>
                              <li><a href="../usage/transformations/couplings.html">Couplings</a></li>
                              <li><a href="../usage/transformations/reference/index.html">Transformation Reference</a></li>
                            </ul></li>
                            <li class="nav-parent"><a>Further Topics</a>
                            <ul class="nav nav-children">
                              <li><a href="../usage/further/sync-vs-async.html">Sync vs. Async</a></li>
                              <li><a href="../usage/further/pipes.html">Pipes</a></li>
                              <li><a href="../usage/further/modules.html">Modules</a></li>
                              <li><a href="../usage/further/debugging.html">Debugging</a></li>
                              <li><a href="../usage/further/rendering.html">Rendering</a></li>
                              <li><a href="../usage/further/configuration.html">Configuration</a></li>
                              <li><a href="../usage/further/best-practices.html">Best Practices</a></li>
                            </ul></li>
                            <li class="nav-parent"><a>IO Adapters</a>
                            <ul class="nav nav-children">
                              <li><a href="../usage/io/file-io.html">File IO</a></li>
                              <li><a href="../usage/io/tcp.html">Network IO (TCP)</a></li>
                            </ul></li>
                            <li><a href="../usage/swave-core-api.html">API Docs (ScalaDoc)</a></li>
                            <li><a href="../usage/swave-akka-compat/index.html">swave-akka-compat</a></li>
                            <li><a href="../usage/swave-scodec-compat/index.html">swave-scodec-compat</a></li>
                            <li><a href="../usage/swave-testkit/index.html">swave-testkit</a></li>
                          </ul></li>
                          <li><a href="../dev/index.html"><i class="fa fa-cogs" aria-hidden="true"></i><span>Developer Documentation</span></a></li>
                          <li class="nav-parent"><a><i class="fa fa-info-circle" aria-hidden="true"></i><span>Project Info</span></a>
                          <ul class="nav nav-children">
                            <li><a href="../project/license.html">License</a></li>
                            <li><a href="../project/contributing.html">Contributing</a></li>
                            <li><a href="../project/changelog.html">Changelog</a></li>
                            <li><a href="../project/sponsors.html">Sponsors</a></li>
                            <li><a href="../project/references.html">References</a></li>
                          </ul></li>
                          <li><a href="../support.html"><i class="fa fa-users" aria-hidden="true"></i><span>Support</span></a></li>
                        </ul>
                    </nav>
                </div>

                <script>
                    // Maintain Scroll Position
                    if (typeof localStorage !== 'undefined') {
                        if (localStorage.getItem('sidebar-left-position') !== null) {
                            var initialPosition = localStorage.getItem('sidebar-left-position'),
                                    sidebarLeft = document.querySelector('#sidebar-left .nano-content');

                            sidebarLeft.scrollTop = initialPosition;
                        }
                    }
                </script>

            </div>

        </aside>

        <section role="main" class="content-body">
            <header class="page-header">
                <ul class="breadcrumbs">
                  <li><a href="../index.html"><i class="fa fa-home"></i></a></li>
                  <li><a href="../usage/index.html">User Documentation</a></li>
                  <li>Quick Start</li>
                </ul>
            </header>
            <div id="main-content">
                <!-- start: page -->
<h1><a href="#quick-start" name="quick-start" class="anchor"><span class="anchor-link"></span></a>Quick Start</h1>
<p>After having added <em>swave</em> to your build (as described in the <a href="setup.html">Setup</a> chapter) you bring all the key identifiers into scope with:</p>
<pre><code class="scala">import swave.core._</code></pre>
<h2><a href="#creating-spouts" name="creating-spouts" class="anchor"><span class="anchor-link"></span></a>Creating Spouts</h2>
<p>With this in place we can create a simple source of stream elements, which are called <a href="spouts.html">Spouts</a> in <em>swave</em>:</p>
<pre><code class="scala">def tenInts: Spout[Int] = Spout(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</code></pre>
<p>As you can probably guess a <code>Spout[T]</code> is parameterized with the type of the elements that the spout produces. <em>swave</em> predefines quite a few ways to create spouts from other types, e.g. from <a href="http://www.scala-lang.org/api/2.11.8/#scala.collection.immutable.Iterable">Iterable</a>, <a href="http://www.scala-lang.org/api/2.11.8/#scala.collection.Iterator">Iterators</a>, <a href="http://www.scala-lang.org/api/2.11.8/#scala.Option">Option</a> and <a href="http://www.scala-lang.org/api/2.11.8/#scala.util.Try">Try</a>, but also <a href="http://www.scala-lang.org/api/2.11.8/#scala.concurrent.Future">Future</a> or <a href="http://www.reactive-streams.org/reactive-streams-1.0.0-javadoc/#org.reactivestreams.Publisher">Publisher</a>. Check out the chapter on <a href="spouts.html">Spouts</a> for more details.</p>
<h2><a href="#attaching-transformations" name="attaching-transformations" class="anchor"><span class="anchor-link"></span></a>Attaching Transformations</h2>
<p>Once you have a <code>Spout</code> you can define <a href="transformations/overview.html">transformations</a> on it, e.g. like this:</p>
<pre><code class="scala">def threeInts = tenInts
  .map(_ * 2)
  .filter(_ &gt; 6)
  .take(3)</code></pre>
<p>Most <a href="transformations/overview.html">transformations</a> give you back another <code>Spout</code> of the same or a different type, but some, especially the <a href="transformations/fan-outs.html">fan-outs</a> and <a href="transformations/fan-ins.html">fan-ins</a> work a bit differently.<br/> The predefined <a href="transformations/overview.html">transformations</a> represent the real &ldquo;meat&rdquo; of <em>swave</em>. They encode a lot of the general logic that is typically required when working with streams. The power of stream-processing stems in large parts from being able to nicely assemble higher-level logic from lower-level primitives in a concise and elegant fashion. Therefore a central part of learning to program with streams is understanding which transformations already exist and how a given piece of business logic might be encoded by combining them in the right way. As with most programs there are usually many ways to achieve the same thing. For example, here are ten ways of producing the same stream (the first 100 natural numbers) with <em>swave</em>:</p>
<pre><code class="scala">def a = Spout(1 to 100)

def b = Spout(1, 2, 3 to 100: _*)

def c = Spout(100 to 1 by -1).map(101 - _)

def d = Spout.ints(from = 1, step = 1).take(100)

def e = Spout.iterate(1)(_ + 1).takeWhile(_ &lt;= 100)

def f = Spout.repeat(1).take(99).scan(1)(_ + _)

def g = Spout(1 to 50) concat Spout(51 to 100)

def h = Spout(List.tabulate(10, 10)(_ * 10 + _))
  .flattenConcat()
  .map(_ + 1)

def i = {
  var i = 0
  Spout.continually { i += 1; i }.take(100)
}

def j = Spout.unfold(1) { i =&gt;
  if (i &lt; 100) Spout.Unfolding.Emit(i, next = i + 1)
  else Spout.Unfolding.EmitFinal(i)
}</code></pre>
<h2><a href="#attaching-drains" name="attaching-drains" class="anchor"><span class="anchor-link"></span></a>Attaching Drains</h2>
<p>After you&rsquo;ve finished defining transformations you&rsquo;ll want to run your stream, i.e. have it produce its output.<br/> In order to do that, however, we first have to define what should happen with the stream output, i.e. where it should be produced <em>to</em>. This is done by attaching a <a href="drains.html">Drain</a> to the spout.</p>
<p>A <a href="drains.html">Drain</a> consumes the data elements of a stream for the purpose of producing some <em>result</em>. For example, this result could be a <a href="http://www.scala-lang.org/api/2.11.8/#scala.collection.immutable.Seq">Seq</a> of all elements, just the first or just the last element, or no element at all. In the latter case the drain might merely serve to achieve some kind of side-effect, like the execution of a function for each element produced by the stream.</p>
<p>Here is a <code>Drain</code> that collects all incoming elements into a <code>Vector</code>:</p>
<pre><code class="scala">def drain[T]: Drain[T, Future[immutable.Seq[T]]] = Drain.seq[T](limit = 1000)</code></pre>
<p>In addition to the type parameter for the element type (that we&rsquo;ve already seen on <code>Spout</code>) a <code>Drain</code> has a second one, which defines the type of the <em>result</em> that the drain produces. For most drains this will be a <a href="http://www.scala-lang.org/api/2.11.8/#scala.concurrent.Future">Future</a>, since the <code>Drain</code> has to work with synchronous as well as asynchronous streams.</p>
<p>Here are some other frequently used drains:</p>
<pre><code class="scala">def drain1[T]: Drain[T, Future[T]] = Drain.head
def drain2[T]: Drain[T, Future[Unit]] = Drain.foreach(println)</code></pre>
<p>As you can see, even the drains that produce &ldquo;no&rdquo; result, still produce one :).<br/> For example the <code>Drain.foreach</code>, which runs a stream to completion only for side-effects, produces a<code>Future[Unit]</code>. Even though in the happy case the future&rsquo;s value isn&rsquo;t very interesting (the <code>Unit</code> value), it still signals two things:</p>
<ul>
  <li>if and when the stream completed</li>
  <li>whether it terminated successfully or with an error</li>
</ul>
<p>Once you have a drain you can attach it to a matching (type-wise) <code>Spout</code> with <code>to(...)</code>, e.g.: </p>
<pre><code class="scala">def piping: Piping[Future[Unit]] =
  Spout(1 to 100).to(Drain.foreach(println))</code></pre>
<p>The result of attaching a <code>Drain</code> to a <code>Spout</code> is a <a href="http://swave.io/api/core/latest/#swave.core.Piping">Piping</a>, a type you&rsquo;ll probably use less frequently in your own code. A <code>Piping</code> represents a complete stream pipeline or graph setup, which is ready to be run. Its single type parameter is the result type of the <code>Drain</code> that was used to &ldquo;close&rdquo; the stream pipeline.</p>
<p>Note that up until this point, including the attachment of a <code>Drain</code>, nothing has really happened apart from <em>describing</em> what your stream setup looks like. No data has started to flow and no resources (apart from the memory for the pipeline) have been claimed.</p>
<h2><a href="#running-a-stream" name="running-a-stream" class="anchor"><span class="anchor-link"></span></a>Running a Stream</h2>
<p>It is only when you call <code>.run()</code> on a <code>Piping</code> that the whole stream machinery kicks into motion and data elements start to flow. Thereby one very important thing to have in mind is that you can only ever call <code>.run()</code> <strong>once</strong> on any given stream setup. After the first <code>.run()</code> call all elements of the stream setup, i.e. all involved spouts and drains (as well as, potentially, <a href="further/pipes.html">Pipes</a> and <a href="further/modules.html">Modules</a>) have been &ldquo;spent&rdquo;. They cannot be used again and will cause all subsequent streams that they are incorporated into to fail with an <a href="http://swave.io/api/core/latest/#swave.core.IllegalReuseException">IllegalReuseException</a>.</p>
<p><em>swave</em> streams can run synchronously (yet without any blocking!) purely on the caller thread. All the examples we&rsquo;ve looked at so far are of this kind. However, there might be components in your stream setup that require asynchronous dispatch and therefore cannot run purely on the caller thread in a non-blocking fashion. For example, a spout or drain might be connected to a network socket and thus must be &ldquo;woken up&rdquo; when new data arrive or the kernel signals that the socket is now ready to accept data. Or the stream might contain a transformation that requires the concept of &ldquo;time&rdquo; in order to do its thing (like <code>throttle</code> or <code>takeWithin</code>). Or you might want to introduce an asynchronous boundary manually (see the <code>async</code> transformation), in order to allow for different parts of your pipeline to be run in parallel. In all of these cases the stream will be started asynchronously when you call <code>.run()</code>, which means it will be started and run on another thread.</p>
<h2><a href="#streamenv" name="streamenv" class="anchor"><span class="anchor-link"></span></a>StreamEnv</h2>
<p>When you try to run a stream now, only with what we&rsquo;ve talked about so far, you&rsquo;ll see that there is still one final thing missing. For example if we try to compile this snippet:</p>
<pre><code class="scala">val result: Future[Unit] =
  Spout(1 to 100)
    .to(Drain.foreach(println))
    .run()</code></pre>
<p>the compiler would stop us with this error message:</p>
<pre><code class="nohighlight">... : could not find implicit value for parameter env: swave.core.StreamEnv
        .run()
            ^  
</code></pre>
<p>which tells us that we need to supply an implicit <a href="http://swave.io/api/core/latest/#swave.core.StreamEnv">StreamEnv</a> instance.</p>
<p>The <a href="http://swave.io/api/core/latest/#swave.core.StreamEnv">StreamEnv</a> is similar to the <a href="http://doc.akka.io/api/akka/2.4/#akka.core.ActorSystem">ActorSystem</a> type in Akka. It provides all the global configuration information that&rsquo;s required by <em>swave&rsquo;s</em> internal streaming engine. For example, the <code>StreamEnv</code> contains the thread-pool configuration(s) and general <a href="http://swave.io/api/core/latest/#swave.core.StreamEnv.Settings">Settings</a> you have <a href="further/configuration.html">configured</a> as well as a global <code>Logger</code> and <a href="http://swave.io/api/core/latest/#swave.core.Scheduler">Scheduler</a> instance.</p>
<p>The simplest and yet perfectly fine way to supply a <code>StreamEnv</code> instance is this:</p>
<pre><code class="scala">implicit val env = StreamEnv()</code></pre>
<p>This will simply load the complete <a href="further/configuration.html">Configuration</a> from the <code>reference.conf</code> and, potentially, <code>application.conf</code> files on your classpath.</p>
<p>Note: If any of the streams that is started with a particular <code>StreamEnv</code> instance is asynchronous, i.e. requires dispatch onto another thread, the <code>StreamEnv</code> instance needs to be explicitly shut down when the application wants to exit. Otherwise the internal thread-pools will not be terminated and thus keep the JVM from exiting (unless all thread-pools are configured with <code>daemonic = on</code>, which is not the default).</p>
<p>This is how you trigger an orderly shutdown of a <code>StreamEnv</code> instance:</p>
<pre><code class="scala">env.shutdown()</code></pre>
<h2><a href="#drainto-shortcuts" name="drainto-shortcuts" class="anchor"><span class="anchor-link"></span></a>drainTo Shortcuts</h2>
<p>Since attaching a <code>Drain</code> and immediately calling <code>.run()</code> on the result is such a common pattern, <em>swave</em> offers several shortcuts that allow you to do both in one single step. For example:</p>
<pre><code class="scala">def spout = Spout(1 to 100)

val result1: Future[Unit] = spout.foreach(println)

val result2: Future[Int] = spout.drainToHead()

val result3: Future[List[Int]] = spout.drainToList(limit = 1000)</code></pre>
<p>There are more <code>drain...</code> variants available on <code>Spout</code>, you might want to <a href="http://swave.io/api/core/latest/#swave.core.Spout">check them out as</a> well.</p>
                <div class="nav-next">
                    <p><strong>Next:</strong> <a href="../usage/basics.html">Basics</a></p>
                </div>
                <!-- end: page -->
            </div>
        </section>
    </div>
</section>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../assets/vendor/jquery.browser.mobile/jquery.browser.mobile.js"></script>
<script src="../assets/vendor/nanoscroller/nanoscroller.js"></script>
<script src="../assets/vendor/highlight/highlight.js"></script>
<script src="../assets/js/theme.js"></script>
<script src="../assets/js/theme.init.js"></script>

</body>
</html>