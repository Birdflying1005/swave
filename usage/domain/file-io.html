<!doctype html>
<html class="fixed sidebar-light">
<head>
    <meta charset="UTF-8">

    <title>File IO Â· swave</title>
    <meta name="keywords" content="scala, streams, streaming, reactive, asynchronous, non-blocking" />
    <meta name="description" content='A Reactive Streams infrastructure implementation in Scala'>
    <meta name="author" content="The swave team">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Shadows+Into+Light" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../../assets/css/theme.css" />
    <link rel="stylesheet" href="../../assets/css/skins/default.css" />
    <link rel="stylesheet" href="../../assets/css/theme-custom.css">
    <link rel="stylesheet" href="../../assets/vendor/highlight/github.css">

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="swave.io">
    <meta name="application-name" content="swave.io">
    <meta name="theme-color" content="#ffffff">

    <script src="../../assets/vendor/modernizr/modernizr.js"></script>
</head>
<body >
<section class="body">

    <header class="header">
        <div class="logo-container">
            <a href="../../index.html" class="logo">
                <img src="../../assets/img/swave-logo.svg" height="35" alt="swave" />
            </a>
            <div class="visible-xs toggle-sidebar-left" data-toggle-class="sidebar-left-opened" data-target="html" data-fire-event="sidebar-left-opened">
                <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
            </div>
        </div>

        <div class="header-right hidden-xs">
            <ul class="social-icons">
                <li class="social-icons-github"><a href="https://github.com/sirthias/swave/" target="_blank" title="Github"><i class="fa fa-github"></i></a></li>
                <li class="social-icons-email"><a href="https://groups.google.com/forum/#!forum/swave-user" target="_blank" title="Mailing List"><i class="fa fa-envelope"></i></a></li>
                <li class="social-icons-twitter"><a href="https://twitter.com/swaveio/" target="_blank" title="Twitter"><i class="fa fa-twitter"></i></a></li>
            </ul>
            <div id="talks-link">
                <a href="../../introduction/talks-on-swave.html" title="Watch the latest introductory talks for swave!">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>&nbsp;
                    <i class="fa fa-video-camera" aria-hidden="true"></i>&nbsp;Watch an intro talk on swave!&nbsp;
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </header>

    <div class="inner-wrapper">
        <aside id="sidebar-left" class="sidebar-left">

            <div class="sidebar-header">
                <div class="sidebar-title">
                    Content
                </div>
                <div class="sidebar-toggle hidden-xs" data-toggle-class="sidebar-left-collapsed" data-target="html" data-fire-event="sidebar-left-toggle">
                    <i class="fa fa-bars" aria-label="Toggle sidebar"></i>
                </div>
            </div>

            <div class="nano">
                <div class="nano-content">
                    <nav id="menu" class="nav-main" role="navigation">
                        <ul class="nav nav-main">
                          <li class="nav-parent"><a><i class="fa fa-blind" aria-hidden="true"></i><span>Introduction</span></a>
                          <ul class="nav nav-children">
                            <li><a href="../../introduction/overview.html">Overview</a></li>
                            <li><a href="../../introduction/reactive-streams.html">Reactive Streams</a></li>
                            <li><a href="../../introduction/swave-vs-akka-stream.html"><em>swave</em> vs. Akka-Stream</a></li>
                            <li><a href="../../introduction/talks-on-swave.html">Talks on <em>swave</em></a></li>
                          </ul></li>
                          <li class="nav-parent nav-expanded nav-active"><a><i class="fa fa-book" aria-hidden="true"></i><span>User Documentation</span></a>
                          <ul class="nav nav-children">
                            <li class="nav-parent"><a>Show-Off</a>
                            <ul class="nav nav-children">
                              <li><a href="../../usage/show-off/overview.html">Show-Off Overview</a></li>
                              <li><a href="../../usage/show-off/md5.html">MD5 Example</a></li>
                              <li><a href="../../usage/show-off/fahrenheit.html">Fahrenheit Example</a></li>
                              <li><a href="../../usage/show-off/monte-carlo-pi.html">Monte Carlo Pi Example</a></li>
                              <li><a href="../../usage/show-off/fibonacci.html">Fibonacci Example</a></li>
                            </ul></li>
                            <li><a href="../../usage/setup.html">Setup</a></li>
                            <li><a href="../../usage/quick-start.html">Quick Start</a></li>
                            <li><a href="../../usage/basics.html">Basics</a></li>
                            <li><a href="../../usage/spouts.html">Spouts</a></li>
                            <li><a href="../../usage/drains.html">Drains</a></li>
                            <li class="nav-parent"><a>Transformations</a>
                            <ul class="nav nav-children">
                              <li><a href="../../usage/transformations/overview.html">Transformations Overview</a></li>
                              <li><a href="../../usage/transformations/simple.html">Simple Transformations</a></li>
                              <li><a href="../../usage/transformations/fan-ins.html">Fan-Ins</a></li>
                              <li><a href="../../usage/transformations/fan-outs.html">Fan-Outs</a></li>
                              <li><a href="../../usage/transformations/streams-of-streams.html">Streams-of-Streams</a></li>
                              <li><a href="../../usage/transformations/relationships.html">Fan-In/Out Relationships</a></li>
                              <li><a href="../../usage/transformations/couplings.html">Couplings</a></li>
                              <li><a href="../../usage/transformations/reference/index.html">Transformation Reference</a></li>
                            </ul></li>
                            <li class="nav-parent"><a>Further Topics</a>
                            <ul class="nav nav-children">
                              <li><a href="../../usage/further/sync-vs-async.html">Sync vs. Async</a></li>
                              <li><a href="../../usage/further/pipes.html">Pipes</a></li>
                              <li><a href="../../usage/further/modules.html">Modules</a></li>
                              <li><a href="../../usage/further/debugging.html">Debugging</a></li>
                              <li><a href="../../usage/further/rendering.html">Rendering</a></li>
                              <li><a href="../../usage/further/configuration.html">Configuration</a></li>
                              <li><a href="../../usage/further/best-practices.html">Best Practices</a></li>
                            </ul></li>
                            <li class="nav-parent nav-expanded nav-active"><a>Domain Adapters</a>
                            <ul class="nav nav-children">
                              <li class="nav-expanded nav-active"><a href="../../usage/domain/file-io.html">File IO</a></li>
                              <li><a href="../../usage/domain/tcp.html">Network IO (TCP)</a></li>
                              <li><a href="../../usage/domain/text.html">Text Transformations</a></li>
                              <li><a href="../../usage/domain/hash.html">Hashing Support</a></li>
                            </ul></li>
                            <li><a href="../../usage/swave-core-api.html">API Docs (ScalaDoc)</a></li>
                            <li><a href="../../usage/swave-akka-compat/index.html">swave-akka-compat</a></li>
                            <li><a href="../../usage/swave-scodec-compat/index.html">swave-scodec-compat</a></li>
                            <li><a href="../../usage/swave-testkit/index.html">swave-testkit</a></li>
                          </ul></li>
                          <li><a href="../../dev/index.html"><i class="fa fa-cogs" aria-hidden="true"></i><span>Developer Documentation</span></a></li>
                          <li class="nav-parent"><a><i class="fa fa-info-circle" aria-hidden="true"></i><span>Project Info</span></a>
                          <ul class="nav nav-children">
                            <li><a href="../../project/license.html">License</a></li>
                            <li><a href="../../project/contributing.html">Contributing</a></li>
                            <li><a href="../../project/changelog.html">Changelog</a></li>
                            <li><a href="../../project/sponsors.html">Sponsors</a></li>
                            <li><a href="../../project/references.html">References</a></li>
                          </ul></li>
                          <li><a href="../../support.html"><i class="fa fa-users" aria-hidden="true"></i><span>Support</span></a></li>
                        </ul>
                    </nav>
                </div>

                <script>
                    // Maintain Scroll Position
                    if (typeof localStorage !== 'undefined') {
                        if (localStorage.getItem('sidebar-left-position') !== null) {
                            var initialPosition = localStorage.getItem('sidebar-left-position'),
                                    sidebarLeft = document.querySelector('#sidebar-left .nano-content');

                            sidebarLeft.scrollTop = initialPosition;
                        }
                    }
                </script>

            </div>

        </aside>

        <section role="main" class="content-body">
            <header class="page-header">
                <ul class="breadcrumbs">
                  <li><a href="../../index.html"><i class="fa fa-home"></i></a></li>
                  <li><a href="../../usage/index.html">User Documentation</a></li>
                  <li><a href="../../usage/domain/index.html">Domain Adapters</a></li>
                  <li>File IO</li>
                </ul>
            </header>
            <div id="main-content">
                <!-- start: page -->
<h1><a href="#file-io" name="file-io" class="anchor"><span class="anchor-link"></span></a>File IO</h1>
<p><em>swave</em> comes with built-in support for stream-based file IO.</p>
<h2><a href="#usage" name="usage" class="anchor"><span class="anchor-link"></span></a>Usage</h2>
<p>You enable built-in support for stream-based file IO with this single import: </p>
<pre><code class="scala">import swave.core.io.files._
</code></pre>
<p>This gives you the following three additional methods on the <code>Spout</code> companion object, which create <a href="../spouts.html">Spout</a> instances for reading arbitrarily large files from the file system in a stream-based fashion (signatures slightly simplified):</p>
<pre><code class="scala">Spout.fromFileName[T: Bytes](fileName: String): Spout[T]
Spout.fromFile[T: Bytes](file: File): Spout[T]
Spout.fromPath[T: Bytes](path: Path): Spout[T]
</code></pre>
<p>The import also gives you the following three additional methods on the <code>Drain</code> companion object, which create <a href="../drains.html">Drain</a> instances for writing arbitrarily large files to the file system in a stream-based fashion (signatures slightly simplified): </p>
<pre><code class="scala">Drain.toFileName[T: Bytes](fileName: String): Drain[T, Future[Long]]
Drain.toFile[T: Bytes](file: File): Drain[T, Future[Long]]
Drain.toPath[T: Bytes](path: Path): Drain[T, Future[Long]]
</code></pre>
<p>Apart from one thing these signatures are probably quite self-explanatory. Still, you might want to take a look at the <a href="http://swave.io/api/core/latest/#swave.core.io.files.SpoutFromFiles">ScalaDoc of the <code>SpoutFromFiles</code> trait</a> and the <a href="http://swave.io/api/core/latest/#swave.core.io.files.DrainToFiles">ScalaDoc of the <code>DrainToFiles</code> trait</a> for more details. Probably also interesting are the <a href="https://github.com/sirthias/swave/tree/master/core/src/main/scala/swave/core/io/files/SpoutFromFiles.scala">sources of the <code>SpoutFromFiles</code> trait</a> and the <a href="https://github.com/sirthias/swave/tree/master/core/src/main/scala/swave/core/io/files/DrainToFiles.scala">sources of the <code>DrainToFiles</code> trait</a>.</p>
<p>The one thing that deserves more explanation here is the type parameter with the <code>Bytes</code> context bound.</p>
<h2><a href="#the-bytes-t-type-class" name="the-bytes-t-type-class" class="anchor"><span class="anchor-link"></span></a>The <code>Bytes[T]</code> Type Class</h2>
<p>As you can see all of the methods shown above take a type parameter <code>T</code>, which (if not explicitly specified) will be inferred from the (single) context bound instance of the type class <code>Bytes[T]</code> that is in scope at the call site.</p>
<p>The purpose of this type parameter is to allow <em>swave</em> to abstract over the concrete data type that represents a chunk of raw bytes, which all lower-level IO operations typically work with. <em>swave</em>&rsquo;s approach here is not to duplicate the excellent work that other projects have invested in this area, but leave the decision of which type to use to the user.</p>
<p>Currently <em>swave</em> pre-defines three <code>Bytes[T]</code> implementations, for these types:</p>
<ol>
  <li>
    <p><code>akka.util.ByteString</code> (as part of the <a href="../swave-akka-compat/index.html">swave-akka-compat</a> module)</p>
    <p>Enabled with <code>import swave.compat.akka.byteStringBytes</code>.</p>
  </li>
  <li>
    <p><code>scodec.bits.ByteVector</code> (as part of the <a href="../swave-scodec-compat/index.html">swave-scodec-compat</a> module)</p>
    <p>Enabled with <code>import swave.compat.scodec.byteVectorBytes</code>.</p>
  </li>
  <li>
    <p><code>Array[Byte]</code> (as part of the <code>core</code> module)</p>
    <p>Enabled with <code>import swave.core.io.byteArrayBytes</code>.</p>
  </li>
</ol>
<p><em>swave</em> intentionally doesn&rsquo;t pick any of these as a &ldquo;preferred default&rdquo;, so you&rsquo;ll have to make a conscious choice as to what you&rsquo;d like to use. If you have no clear preference we&rsquo;d recommend you rely on <a href="http://scodec.org/api/scodec-bits/1.1.2/#scodec.bits.ByteVector">scodec.bits.ByteVector</a> as it appears to be the most flexible implementation with the broadest API offering.</p>
<p>If you rely on the <code>byteArrayBytes</code> implementation (which has the advantage of not requiring any module dependency in addition to <code>swave-core</code>) be aware that <em>swave</em> treats instances of <code>Array[Byte]</code> as immutable, even though they this is not and cannot be enforced. So, if you violate this convension in your own code by mutating byte array instances in place you should be sure to know what you are doing.</p>
                <div class="nav-next">
                    <p><strong>Next:</strong> <a href="../../usage/domain/tcp.html">Network IO (TCP)</a></p>
                </div>
                <!-- end: page -->
            </div>
        </section>
    </div>
</section>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="../../assets/vendor/jquery.browser.mobile/jquery.browser.mobile.js"></script>
<script src="../../assets/vendor/nanoscroller/nanoscroller.js"></script>
<script src="../../assets/vendor/highlight/highlight.js"></script>
<script src="../../assets/js/theme.js"></script>
<script src="../../assets/js/theme.init.js"></script>

</body>
</html>